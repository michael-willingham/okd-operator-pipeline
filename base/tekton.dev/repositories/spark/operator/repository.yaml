apiVersion: polling.tekton.dev/v1alpha1
kind: Repository
metadata:
  name: spark-operator-repository
  namespace: okd-team
spec:
  url: https://github.com/GoogleCloudPlatform/spark-on-k8s-operator
  ref: master
  frequency: 5m
  type: github
  pipelineRef:
    name: operator
    namespace: okd-team
    params:
      - name: repo-ref
        expression: commit.sha
      - name: repo-url
        expression: repoURL
      - name: base-image-registry
        expression: "'quay.io/okderators'"
      - name: image-name
        expression: "'spark-operator'"
      - name: image-version
        expression: "'dev'"
      - name: channel
        expression: "'dev'"
      - name: default-channel
        expression: "'stable'"
    workspaces:
      - name: output
        persistentVolumeClaim:
          claimName: spark-operator-volume
      - name: patches
        persistentVolumeClaim:
          claimName: spark-operator-patch